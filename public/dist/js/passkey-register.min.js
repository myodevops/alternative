document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("passkey-register-button");e&&e.addEventListener("click",(async e=>{e.preventDefault();try{if(Webpass.isUnsupported())return void alert("Your browser doesn't support WebAuthn.");const e=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")??"",{credential:t,success:r,error:n}=await Webpass.attest("/webauthn/register/options","/webauthn/register",{csrf:e});r?Swal.fire({title:"Passkey registered successfully!",icon:"success",confirmButtonText:"Go to Dashboard"}).then((()=>{window.location.href="/dashboard"})):Swal.fire({title:"Passkey registration failed",text:n||"Unknown error",icon:"error",confirmButtonText:"Ok"})}catch(e){Swal.fire({title:"Error",text:e.message||"An unexpected error occurred",icon:"error",confirmButtonText:"Ok"})}}))}));